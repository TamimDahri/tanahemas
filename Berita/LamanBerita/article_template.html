<!DOCTYPE html>
<html lang="ms">
<head>
    <!-- Open Graph / WhatsApp -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://tanahmalaya.com/">
  <meta property="og:title" content="Tanah Malaya">
  <meta property="og:description" content="Memelihara Tanah Negara">
  <meta property="og:image" content="https://tanahmalaya.com/te.png">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://tanahmalaya.com/">
  <meta property="twitter:title" content="Tanah Malaya">
  <meta property="twitter:description" content="Memelihara Tanah Negara">
  <meta property="twitter:image" content="https://tanahmalaya.com/te.png">

  <!-- Favicon: Selesai, menggunakan te.png -->
  <link rel="icon" type="image/png" href="te.png">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title id="page-title">Memuatkan Artikel...</title>

  <!-- Google AdSense Script (!!! IMPORTANT: REPLACE 'ca-pub-...' with your actual Publisher ID !!!) -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1234567890123456"
     crossorigin="anonymous"></script>
  <!-- End Google AdSense Script -->

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Showdown (Markdown -> HTML) -->
  <script src="https://cdn.jsdelivr.net/npm/showdown@2.1.0/dist/showdown.min.js"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#4A4339', // Deep Earth Brown/Mocha (Tanah) - CHANGED
            secondary: '#D4AF37', // Rich Gold/Emas (Emas Accent) - CHANGED
            accent: '#FDF9F5', // Creamy off-white (Light Background) - CHANGED
            'dark-bg': '#4A4339', // Same as Primary - CHANGED
          },
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
          }
        }
      }
    };
  </script>

  <style>
    /* ---- DO NOT use @apply here; CDN Tailwind won't process it ---- */

    /* Markdown typography */
    .markdown-content h1{
      font-size: 2.25rem; /* text-4xl */
      font-weight: 800;
      color: #4A4339; /* primary */ /* CHANGED */
      margin-bottom: 1.5rem; /* mb-6 */
      padding-top: 1rem; /* pt-4 */
      border-bottom: 1px solid rgba(212, 175, 55, 0.5); /* secondary/50 */ /* CHANGED */
    }

    .markdown-content h2{
      font-size: 1.875rem; /* text-3xl */
      font-weight: 700;
      color: #4A4339; /* primary */ /* CHANGED */
      margin-top: 2rem; /* mt-8 */
      margin-bottom: 1rem; /* mb-4 */
      border-left: 4px solid #D4AF37; /* secondary */ /* CHANGED */
      padding-left: 0.75rem; /* pl-3 */
    }

    /* Pelarasan di sini: Menggunakan 'my-8' untuk margin atas dan bawah 
       untuk jarak yang lebih konsisten dan jelas antara perenggan. */
    .markdown-content p{
      font-size: 1.125rem; /* text-lg */
      color: #4A4339; /* text-gray-700 in new scheme is closer to primary or text-neutral-700, using primary for distinction */
      margin-top: 2rem;
      margin-bottom: 2rem;
      line-height: 1.8; /* leading-loose */
    }

    .markdown-content strong{
      color: #4A4339; /* primary */ /* CHANGED */
      font-weight: 600;
    }

    /* Margin bawah senarai ditingkatkan kepada mb-8 */
    .markdown-content ul{
      list-style-type: disc;
      list-style-position: inside;
      margin-left: 1.5rem; /* ml-6 */
      margin-bottom: 2rem; /* mb-8 */
    }

    .markdown-content li{
      margin-bottom: 0.5rem; /* mb-2 */
      color: #4A4339; /* text-gray-600 in new scheme */
    }

    /* Pelarasan di sini: Meningkatkan margin-y untuk Blockquote kepada my-10 */
    .markdown-content blockquote{
      border-left: 4px solid #D4AF37; /* secondary */ /* CHANGED */
      background-color: #F8F8F8; /* A light background that complements accent (#FDF9F5) */
      padding: 1rem; /* p-4 */
      font-style: italic;
      color: #4A4339; /* text-gray-800 in new scheme is closer to primary */
      border-radius: 0.5rem; /* rounded-lg */
      margin-top: 2.5rem; /* my-10 */
      margin-bottom: 2.5rem; /* my-10 */
    }
  </style>
</head>
<body class="bg-accent font-sans min-h-screen">

    <!-- Header (Simple - Hanya logo di kiri) -->
    <header class="bg-primary shadow-lg">
        <!-- Changed max-w-4xl to max-w-7xl for full bleed, and justify-center to justify-start -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-start">
            <a href="../index.html" class="text-3xl font-extrabold text-white tracking-wider">Tanah<span class="text-secondary">Malaya</span></a>
        </div>
    </header>

    <!-- ===== AD RAIL CONTAINERS (160x600 Skyscraper) START ===== -->

    <!-- Left Ad Rail: Fixed position, only visible on XL screens and up (1280px+) -->
    <!-- top-20 positions it 5rem (80px) from the top, just below the header -->
    <div id="ad-left-rail" class="hidden xl:block fixed top-20 left-8 w-40 h-[600px] z-10">
        <!-- 
            !!! IMPORTANT: PASTE YOUR ACTUAL 160x600 AD CODE HERE !!! 
            We are using a placeholder ad code below for structure.
        -->
        <ins class="adsbygoogle"
            style="display:inline-block;width:160px;height:600px;background-color:#EFEFEF;border:1px dashed #D4AF37;border-radius:8px;text-align:center;padding-top:200px;color:#4A4339;"
            data-ad-client="ca-pub-1234567890123456"
            data-ad-slot="1111111111">Left Skyscraper Ad</ins>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
        </script> 
    </div>

    <!-- Right Ad Rail: Fixed position, only visible on XL screens and up (1280px+) -->
    <div id="ad-right-rail" class="hidden xl:block fixed top-20 right-8 w-40 h-[600px] z-10">
        <!-- 
            !!! IMPORTANT: PASTE YOUR ACTUAL 160x600 AD CODE HERE !!! 
            We are using a placeholder ad code below for structure.
        -->
        <ins class="adsbygoogle"
            style="display:inline-block;width:160px;height:600px;background-color:#EFEFEF;border:1px dashed #D4AF37;border-radius:8px;text-align:center;padding-top:200px;color:#4A4339;"
            data-ad-client="ca-pub-1234567890123456"
            data-ad-slot="2222222222">Right Skyscraper Ad</ins>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>
    <!-- ===== AD RAIL CONTAINERS END ===== -->

    <main class="py-12">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 bg-white p-6 md:p-10 rounded-2xl shadow-xl">
            <!-- Article Header (Dynamically updated) -->
            <div id="article-header" class="mb-8">
                <p id="article-category" class="text-sm font-semibold text-secondary uppercase tracking-wider mb-2">KATEGORI</p>
                <h1 id="article-title" class="text-5xl font-extrabold text-primary mb-4">Tajuk Dimuatkan...</h1>
                <p id="article-description" class="text-xl text-gray-600 mb-6 font-light">Keterangan ringkas dimuatkan...</p>
                <div id="article-meta" class="text-gray-500 text-sm flex items-center space-x-4 border-t pt-4">
                    <span>Oleh: <strong class="text-primary">Media TanahMalaya</strong></span>
                    <span id="article-date">Memuatkan...</span>
                </div>
            </div>
            
            <!-- Main Content Area -->
            <div class="pt-4">
                <!-- Content from Markdown file will be injected here -->
                <div id="article-content" class="markdown-content">
                    <p class="text-center text-gray-500 py-10">
                        <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-primary inline-block" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                        Memuatkan kandungan artikel...
                    </p>
                </div>
            </div>
            
            <!-- Share Section removed for brevity, was commented out -->

            <!-- Back button -->
            <div class="mt-12 text-center">
                <a href="../index.html" class="inline-flex items-center bg-primary text-white font-bold px-8 py-3 rounded-full text-base shadow-lg hover:bg-dark-bg transition duration-300">
                    &larr; Kembali ke Senarai Berita
                </a>
            </div>
        </div>
    </main>
    
    <!-- Footer placeholder - for visual completeness -->
    <footer class="bg-dark-bg h-16 w-full mt-10"></footer>

    <script>
        // Function to extract URL parameter
        function getUrlParameter(name) {
            name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
            var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
            var results = regex.exec(location.search);
            return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
        };

        // Asynchronously loads article content and metadata
        async function loadAndRenderArticle() {
          const contentFileName = getUrlParameter('source');
          const articleContentDiv = document.getElementById('article-content');
          
          if (!contentFileName) {
            articleContentDiv.innerHTML = '<p class="text-red-500 text-xl text-center">Ralat: Tiada sumber kandungan ditetapkan dalam URL.</p>';
            document.getElementById('article-title').textContent = 'Ralat';
            document.getElementById('page-title').textContent = 'Ralat | TanahMalaya';
            return;
          }

          try{
            // 1) Fetch content
            const markdownFilePath = contentFileName;
            const response = await fetch(markdownFilePath);
            if (!response.ok) throw new Error(`Gagal memuatkan fail Markdown: ${markdownFilePath}`);
            const markdownText = await response.text();

            // 2) Fetch metadata
            const metadataResponse = await fetch('../news_data.json');
            const newsData = await metadataResponse.json();
            const metadata = newsData.find(item => item.contentSource === contentFileName);

            // Update Header
            if(metadata){
              document.getElementById('article-category').textContent = metadata.category || 'Berita';
              document.getElementById('article-title').textContent = metadata.title || 'Tanpa Tajuk';
              document.getElementById('article-description').textContent = metadata.description || '';
              document.getElementById('article-date').textContent = metadata.date || '';
              document.getElementById('page-title').textContent = (metadata.title || 'Artikel') + ' | TanahMalaya';
              
              // Image update section removed
            } else {
              document.getElementById('article-description').textContent = 'Metadata tidak ditemui untuk artikel ini.';
            }

            // 3) Convert Markdown -> HTML
            const converter = new showdown.Converter({
              // keep default paragraph behavior (blank line => <p>)
              simpleLineBreaks: false,
              tables: true,
              tasklists: true,
              smartIndentationFix: true,
              literalMidWordUnderscores: true
            });

            const htmlContent = converter.makeHtml(markdownText);
            articleContentDiv.innerHTML = htmlContent;

          }catch(err){
            console.error(err);
            articleContentDiv.innerHTML = `<p class="text-red-500 text-xl text-center">Ralat: Gagal memuatkan artikel penuh. Sila pastikan fail Markdown (${contentFileName}) wujud.</p>`;
            document.getElementById('article-title').textContent = 'Kandungan Tidak Ditemui';
            document.getElementById('page-title').textContent = 'Kandungan Tidak Ditemui | TanahMalaya';
          }
        }

        window.onload = loadAndRenderArticle;
  </script>
</body>
</html>
